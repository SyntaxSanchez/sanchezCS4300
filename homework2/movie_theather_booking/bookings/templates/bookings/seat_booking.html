{% extends 'bookings/base.html' %}
{% block title %}Seat Booking{% endblock %}

{% block content %}
<h2 class="mb-4">Book Seats for "{{ movie.title }}"</h2>

<!-- Show error message if any -->
{% if error %}
<div class="alert alert-danger">{{ error }}</div>
{% endif %}

<div class="row">
  {% for seat in seats %}
  <div class="col-md-2 mb-3">
    <div class="card {% if seat.is_booked %}bg-secondary text-white{% else %}border-success{% endif %}">
      <div class="card-body text-center">
        <h6>Seat {{ seat.seat_number }}</h6>

        {% if seat.is_booked %}
          <span class="badge bg-danger">Booked</span>
        {% else %}
          <form method="post">
            {% csrf_token %}
            <input type="hidden" name="seat" value="{{ seat.id }}" />
            <button type="submit" class="btn btn-sm btn-success mt-2">Book</button>
          </form>
        {% endif %}
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<!-- Back button -->
<a href="{% url 'movie_list' %}" class="btn btn-secondary mt-4">Back to Movies</a>
{% endblock %}
